{% extends "peptitions/main.html" %}

{% block content %}
<main class="flex-1 px-1">
  <div class="bg-white shadow rounded-lg p-6">
    <h2 class="text-2xl font-semibold mb-4">{{ petition.title }}</h2>
    <p class="text-gray-700 mb-4">{{ petition.description }}</p>
    <p class="text-sm text-gray-500">Created at: {{ petition.created_at|date:"M d, Y H:i" }}</p>
    <p class="text-sm text-gray-500">Posted By: {{ petition.created_by }}</p>

    <p class="text-sm text-gray-500">Status: 
      {% if petition.status == "pending" %}
        <span class="bg-yellow-100 text-yellow-800 px-2 py-1 text-xs rounded">Pending</span>
      {% elif petition.status == "approved" %}
        <span class="bg-green-100 text-green-800 px-2 py-1 text-xs rounded">Approved</span>
      {% else %}
        <span class="bg-red-100 text-red-800 px-2 py-1 text-xs rounded">Rejected</span>
      {% endif %}
    </p>

    {% if petition.status == "pending" %}
    <form method="post" class="mt-6 flex gap-2">
      {% csrf_token %}
      <button name="action" value="approved" 
        onclick="return confirm('Are you sure you want to approve this petition?');"
        class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
        Approve
      </button>
      
      <button name="action" value="rejected" 
        onclick="return confirm('Are you sure you want to reject this petition?');"
        class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
        Reject
      </button>
    </form>

    {% else %}
    <p class="mt-6 text-gray-500 italic">This petition has already been {{ petition.status }}.</p>
    {% endif %}
  </div>
</main>
{% endblock %}
